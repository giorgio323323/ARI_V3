\hypertarget{ari_pi__2_d_c__esp__08_8ino}{}\section{C\+:/\+Users/giorgio.rancilio/\+Dropbox/\+Makers\+Pgo/progetto\+Alfredo/arianna/ari2\+D\+Cmotor/arianna-\/arianna2dc/00\+\_\+ari\+\_\+\+V3/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.ino File Reference}
\label{ari_pi__2_d_c__esp__08_8ino}\index{C\+:/\+Users/giorgio.\+rancilio/\+Dropbox/\+Makers\+Pgo/progetto\+Alfredo/arianna/ari2\+D\+Cmotor/arianna-\/arianna2dc/00\+\_\+ari\+\_\+\+V3/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{C\+:/\+Users/giorgio.\+rancilio/\+Dropbox/\+Makers\+Pgo/progetto\+Alfredo/arianna/ari2\+D\+Cmotor/arianna-\/arianna2dc/00\+\_\+ari\+\_\+\+V3/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08/ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
{\ttfamily \#include $<$S\+P\+I.\+h$>$}\newline
{\ttfamily \#include $<$S\+D.\+h$>$}\newline
{\ttfamily \#include $<$Servo.\+h$>$}\newline
{\ttfamily \#include $<$T\+F\+Mini.\+h$>$}\newline
{\ttfamily \#include $<$E\+E\+P\+R\+O\+M.\+h$>$}\newline
{\ttfamily \#include $<$Wire.\+h$>$}\newline
{\ttfamily \#include $<$Adafruit\+\_\+\+Sensor.\+h$>$}\newline
{\ttfamily \#include $<$Adafruit\+\_\+\+L\+S\+M303\+\_\+\+U.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$D\+R\+V8833.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_af5e2c0a692b6b075e9a95ac11a5c5b06}{A\+R\+I3}}~1
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a0795d970ec6b0998fc398ecba0dc1fbc}{S\+C\+R\+I\+VI}}~0
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6f99aa69652bb4f0435fbf31d21ba7c9}{L\+E\+G\+GI}}~1
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3da44afeba217135a680a7477b5e3ce3}{D\+E\+F\+A\+U\+LT}}~2
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8e296a962daed7fa0ffeeab350593594}{D\+U\+E\+\_\+\+PI}}~6.\+28318
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3059d914dc801da27fea64290d8f0a28}{E\+S\+Pserial}}~Serial2
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a09582c1cafb46dfb44288122f23ed702}{T\+Fserial}}~Serial1
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_acc60ca04f3ee450b48548582048ed8fa}{S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN}}~45
\begin{DoxyCompactList}\small\item\em Digital IO pin connected to the servo pin. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aacf6d5e66edfb457b13cbced950fc0af}{S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN}}~44
\begin{DoxyCompactList}\small\item\em Digital IO pin connected to the servo pin. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a594090dbf515f41d4249fade4f14c463}{G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN}}~3
\begin{DoxyCompactList}\small\item\em encoder rotazione albero motore I\+D\+\_\+009 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab1940449ba61cdf83d35a9dab25b039c}{G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN}}~2
\begin{DoxyCompactList}\small\item\em encoder rotazione albero motore I\+D\+\_\+009 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3b5d438b9c0508db7c53e86daa265dc8}{R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}~31
\begin{DoxyCompactList}\small\item\em seleziona sensore frontale Dx \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a531e2edff1884d356024e8764761ffaa}{L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}~29
\begin{DoxyCompactList}\small\item\em sensore frontale Sx \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a551793442f7ac915171c5478f3df0955}{E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}~30
\begin{DoxyCompactList}\small\item\em abilita sensore frontale Dx \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a5709a7b011efe9859445cf4a2c0646ea}{E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}~28
\begin{DoxyCompactList}\small\item\em abilita frontale Sx \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a49ba715e713d99d1a5c20429dacaf073}{led\+Pin}}~13
\begin{DoxyCompactList}\small\item\em led segnalazioni varie su Arduino \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ad29f66110456ba86205034ad1232fca8}{laser\+Pin}}~8
\begin{DoxyCompactList}\small\item\em porta puntatore laser \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a61f762ee849a4b411a7cc07d78dde55d}{T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE}}~0
\begin{DoxyCompactList}\small\item\em modalità di test per fasi di debug \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3e6a2d7b0da74a50b9fd5b16aace4414}{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}}~1
\begin{DoxyCompactList}\small\item\em modalità di test per fasi di debug \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_addf0ed25cb1de6ac65f3f60a7f50c01a}{T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS}}~2
\begin{DoxyCompactList}\small\item\em modalità di test per fasi di debug \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab57f62e8f32f367dbca255771ff72e20}{T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}}~3
\begin{DoxyCompactList}\small\item\em modalità di test per fasi di debug \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_adcc6c25175a8908813ff718bc774c2ab}{T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR}}~4
\begin{DoxyCompactList}\small\item\em modalità di test per fasi di debug \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab6c0fc0e0028f3917b0ce67bee73d01e}{T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}}~25
\begin{DoxyCompactList}\small\item\em tempo del controllo sterzo, posizione etc in ms \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a140e19c4b6cb883d0f3abceea67a62ba}{E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO}}~10
\begin{DoxyCompactList}\small\item\em \mbox{[}mm\mbox{]}, distanza dall\textquotesingle{}obbiettivo dove il robot si arresta \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a60736df151b230ad9683a2e8dbee13a6}{E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO}}~300
\begin{DoxyCompactList}\small\item\em \mbox{[}mm\mbox{]}, distanza dall\textquotesingle{}obbiettivo dove il robot inizia a rallentare \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3ea4f86fda9125c7b34d735b4f14f42a}{F\+E\+R\+MO}}~0
\begin{DoxyCompactList}\small\item\em valore pwm di uscita durante stato di F\+E\+R\+MO \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4774b749cfc65db93b2e726543c9115f}{M\+O\+D\+E\+R\+A\+TA}}~190
\begin{DoxyCompactList}\small\item\em valore pwm di uscita durante marcia M\+O\+D\+E\+R\+A\+TA \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3336677c5466ffd6adee69e68e25f236}{A\+P\+P\+R\+O\+C\+C\+IO}}~110
\begin{DoxyCompactList}\small\item\em valore pwm di uscita durante marcia A\+P\+P\+R\+O\+C\+C\+IO \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a9af1e62ce938e1b51a846fc15cf307e3}{A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE}}~160
\begin{DoxyCompactList}\small\item\em valore pwm di uscita durante fase accelerazione (non usato) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a7d6e95bc7ca024893f2bd7d217b2bd6d}{A\+V\+A\+N\+TI}}~0
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8db0e8841207a8e9ce1845ba10b4a637}{I\+N\+D\+I\+E\+T\+RO}}~1
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8226ade05454c12b2636c063d60f0050}{K\+P\+\_\+\+D\+EF}}~8
\item 
\#define \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ae69228439056c7947d8c67f0e31cd555}{M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO}}~1.\+0
\begin{DoxyCompactList}\small\item\em massimo valore di sterzo. con 1 si ha una ruota ferma e l\textquotesingle{}altra al doppio della velocita\textquotesingle{} \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em setup della parte hardware e caricamento coefficienti da E2prom \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6af06b46b74b5a44e1adc270e1e07e6b}{odometro\+Dx\+Misura\+HW}} (void)
\begin{DoxyCompactList}\small\item\em odometri \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aef8d9e68883244c4d12fb9dfb14b0b2e}{odometro\+Sx\+Misura\+HW}} (void)
\begin{DoxyCompactList}\small\item\em vedi Sx \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_af117273d2066fa1917036ae9a9742ae7}{differenziale}} (float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8dfd382ee3674a1db48ad2c69bcaaf56}{motor\+Speed}})
\begin{DoxyCompactList}\small\item\em sterzo con differenziale. Per curvare la velocità relativa delle due ruote viene modificata. Con le velocità uguali proseguo diritto, con una maggiore dell\textquotesingle{}altra curvo. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a1961cf99cc4edb6f9f48ea4b3ec3112c}{update\+Position}} (void)
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a914ee45b85c8745eaee35cdef279a276}{send\+Answer2}} (char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4b20c17190582b367bfba9b9bd5ea962}{port}})
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a9d7193cecd4d57fda8e39dc98a236253}{richieste}} (void)
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8865513d32ebc241dbe80e5bf49ff775}{comandi}} ()
\begin{DoxyCompactList}\small\item\em comandi\+: i comandi assegnano valori o eseguono funzioni. iniziano con un 3 e hanno la lettera maiuscola, sono seguiti da uno o più numeri. non ci sono spazi di separazione. i numeri, se non diversamente indicato, sono floating point, la virgola è data col \textquotesingle{}.\textquotesingle{}, es 3.\+14 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a64ea2b252b5ab59be204f70e2206ce1c}{get\+Cmd2}} (void)
\begin{DoxyCompactList}\small\item\em quando arriva una stringa da E\+SP la processa. Il protocollo usato è in A\+S\+C\+II permette di inviare comandi o richieste. ~\newline
 Il primo carattere indica se richiesta (1) o comando (3). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ae29b9282fc7ede860a2bb8984ad0560c}{r\+Seriale}} (void)
\begin{DoxyCompactList}\small\item\em riceve i caratteri dalla seriale dell\textquotesingle{}E\+SP. Il char \textquotesingle{}!\textquotesingle{} è l\textquotesingle{}inizio stringa, il \textquotesingle{}?\textquotesingle{} è il terminatore della stringa. il terminatore della stringa è ? \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a24f4d37ce4673eadaa4043cf6ecaff27}{Data\+E\+Eprom}} (char comando)
\begin{DoxyCompactList}\small\item\em gestisce dei valori sulle E2prom. I vengono letti e scritti nello stesso ordine. La procedura gestisce anche il valore di default. letti i valori si procede ad aggiornare i parametri dipendenti dai valori assegnati. Questa procedura viene chiamata al termine dell\textquotesingle{} start\+Up con comando L\+E\+G\+GI. Vengono quindi attivati i parametri salvati in E\+Eprom. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_abbdedc0823a18fd32dee96e0acad447e}{print\+Dati\+Calibrazione}} (void)
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6f20cd3646bc1f8af9a4f9d5e45f5c90}{test\+Ostacoli}} ()
\begin{DoxyCompactList}\small\item\em riporta al controller la distanza letta dal lidar, la risposta ha formato \char`\"{}mis;\char`\"{} + distanza in cm\char`\"{}.
aggiorna anche la il valore \char`\"{}lidardist" ogni 250 ms. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a23abf4b5bc87f963b0270c015e379872}{lidar}} ()
\begin{DoxyCompactList}\small\item\em libreria lettura lidar \end{DoxyCompactList}\item 
String \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a0f6c65484953fd460fd89ee3a1a3825e}{lidar\+Misura\+Amb}} (int numero\+Misure, int ang)
\begin{DoxyCompactList}\small\item\em legge il lidar e prepara la stringa di risposta. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ac3a1af41d00b96587bf75bad54078a1f}{display\+Sensor\+Details}} (void)
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a5b51c469eb312609df7a037c33bde58d}{get\+Sensor\+Reading}} (void)
\item 
void \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ada2502f03f6e1fe62fef80b03f317b98}{compass}} (void)
\begin{DoxyCompactList}\small\item\em Gets the most recent sensor values and transform in angle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Adafruit\+\_\+\+L\+S\+M303\+\_\+\+Mag\+\_\+\+Unified \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8358c2402fb15c1b0f5fbbfb0a1e6a85}{mag}} = Adafruit\+\_\+\+L\+S\+M303\+\_\+\+Mag\+\_\+\+Unified(12345)
\item 
Servo \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aaf3c8c8d2e46ac81d19dda9e4213d6a1}{servo\+Pan}}
\item 
Servo \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a1a47b66f30649678ffd87493fe397afd}{servo\+Tilt}}
\item 
T\+F\+Mini \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa556a72ca05ce9a3861b99c901bc58d6}{tfmini}}
\item 
String \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_abfa7bc4032f1ef9070aa48a183f30d4a}{input\+String}} = \char`\"{}\char`\"{}
\item 
String \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a54b4b16653970eab34e2ba40199fd6f3}{input\+String\+Tmp}} = \char`\"{}\char`\"{}
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a0f792197854bfeff54c46ebf012b2187}{okcomm}} = 0
\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4b20c17190582b367bfba9b9bd5ea962}{port}} = 0
\item 
D\+R\+V8833 \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ac547551c409b3659bcfa04a597e8d76b}{driver}} = D\+R\+V8833()
\item 
const int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab8a00bd06cb46156aa7cb936b4eb8c85}{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1}} = 5
\item 
const int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a1daadb07ea3186bedb91de1bbfb47b58}{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2}} = 6
\item 
const int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8b68fd0f29306f0feb3d5f3ac5c5c9b4}{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1}} = 9
\item 
const int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a77c90f26573c080620f9baca24364ebe}{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2}} = 10
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ac179a794839296fb9b090264967b2dd9}{motor\+Speed\+Ref}} = 0
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6505c8e9ac66c5a6ac679bc41647f100}{direzione}} = 1
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6e9c7be6c7c4f653f9d3ca70006130e6}{dir\+VA}} = 1
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aaf30ecc1398dffba96805a9ce60d1480}{dir\+VB}} = 1
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa57b545b28e726dc370d6afd59930221}{V\+B\+\_\+zero}} = 0
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a57bf2119e3e83782219233e9bd8b0125}{V\+A\+\_\+zero}} = 0
\item 
long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4e6edab3c135f74217f544821dbb3a49}{odometro\+Cnt}}
\item 
long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a0ac82b55ed4fe13596eeffa61bb06685}{odometro\+Dx\+Cnt}}
\item 
long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab4ce4d95d7983a12a924f49196f9b9a5}{odometro\+Sx\+Cnt}}
\begin{DoxyCompactList}\small\item\em contatori encoder \end{DoxyCompactList}\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a7acc771f00b743e5b3e0d2512eb5329b}{first\+Run}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a46145722dc21eed1a702b867ced59e49}{ED}} = 1.\+0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aab9585a72373b934a8e78ac806c57f50}{E\+D\+\_\+\+B\+A\+SE}} = 1.\+0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a9c5bc38bd76775bbcb1e430646060ca5}{B\+A\+S\+E\+L\+I\+NE}} = 130.\+0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a023cb7e635b51ac94b3e22f2b6ac8f9c}{L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI}} = 0.\+065
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aeee767366b9e5e9bb8022b27fcbb7e68}{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX}} = 1.\+0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a87caded4c49d6deea703487e7f11d9e3}{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX}} = 1.\+0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ac57aebfcef0c4d31360b170366395c4a}{G\+I\+R\+O\+\_\+\+R\+U\+O\+TA}} = 1.\+0
\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6a8d27409d947dce17cce28a56701a5c}{M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE}} = 9
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a5339db6126d080787f8511e2aae71e34}{stato\+Run}} = 0
\begin{DoxyCompactList}\small\item\em macchina a stati del movimento. Definisce anche il tipo controllo guida. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ac36ade784c05554d24241a2fa860bbaa}{odometro}} = 0
\begin{DoxyCompactList}\small\item\em distanza percorsa in mm \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa0ded4438d2bf98ac92bf5e3680d5084}{distanza}} = 0
\begin{DoxyCompactList}\small\item\em distanza da percorrere col prossio Run \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6bd7fe73202cbe57f50f29e17bf7f1d2}{raggior\+Sterzo}} = 0.\+0
\begin{DoxyCompactList}\small\item\em raggior\+Sterzo indica lo scorrimento che applichiamo alle ruote. vedi function differenziale \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4a8018086ebb57f68726715ade9fc53d}{lidardist}} = 0.\+0
\begin{DoxyCompactList}\small\item\em \mbox{[}cm\mbox{]} distanza misurata dal Lidar \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a249abd6fb895eba5af34eb2516a7dea3}{errore}}
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8dfd382ee3674a1db48ad2c69bcaaf56}{motor\+Speed}} = 0
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6c202cc2e1ecd2889d313233e5360ae9}{motor\+Speed\+Value}} = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4774b749cfc65db93b2e726543c9115f}{M\+O\+D\+E\+R\+A\+TA}}
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a41052b199a87567ee2438e605f1f949d}{pan\+Angle}} = 90
\begin{DoxyCompactList}\small\item\em angolo destinazione del servo Pan \end{DoxyCompactList}\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ad64f6da25c8c1de30ddeb9e0541fa839}{tilt\+Angle}} = 90
\begin{DoxyCompactList}\small\item\em angolo destinazione del servo Tilt \end{DoxyCompactList}\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa9eb73e0d7151ab1d50ab7d71114e6bd}{laser}} = 0
\begin{DoxyCompactList}\small\item\em stato uscita puntatore laser \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a1f7add0f84d583bc2eceb290d6c4cc06}{kp}} = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8226ade05454c12b2636c063d60f0050}{K\+P\+\_\+\+D\+EF}}
\begin{DoxyCompactList}\small\item\em guadagno proporzionale per controllo su distanza muro \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a6f825712ede5cd29e0ee8a3b8603fa5f}{kp\+Teta}} = 2.\+0
\begin{DoxyCompactList}\small\item\em guadagno proporzionale per controllo su teta \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ad59a70cc86150e574e73066bf9b92062}{ki\+Teta}} = 0.\+02
\begin{DoxyCompactList}\small\item\em guadagno integrale per controllo su teta \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a33a1abc735507147bab601374a138b09}{M\+A\+X\+\_\+S}} = 0.\+2
\begin{DoxyCompactList}\small\item\em max\+\_\+s = L\+A\+R\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+Z\+I/\+Raggio massimo \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa1cebdc383b21b594c09df4f1d035286}{teta}} = 0.\+0
\begin{DoxyCompactList}\small\item\em teta attuale misurato da odometria \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_adad239fcacf5c59997872bd0c12bdfd1}{xpos}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_adb369a2ec52b1f831cf362b570df40d2}{ypos}} = 0.\+0
\begin{DoxyCompactList}\small\item\em x attuale misurato da odometria \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a75a4104f4a9f0fc17b53a88379ed7130}{teta\+Ref}} = 0.\+0
\begin{DoxyCompactList}\small\item\em y attuale misurato da odometria \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ae26b39d3cd60fb721672915cdb90d756}{teta\+Misura}} = 0.\+0
\begin{DoxyCompactList}\small\item\em teta da bussola \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8c4da7cbc4b1a3cc91ebb8aeb7ecabbd}{xc}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_abc8f2957d7ee72cfb3e2af9bdfc27018}{yc}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a87efb8e08c2adbc437cc67078d6a55fc}{teta\+Compass}}
\begin{DoxyCompactList}\small\item\em vettori magnetici dalla bussola \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_affc72d7637b810bd21ce037f035b6e0a}{delta\+Compass}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aab8609ee95cbabd2ffeaf176b9fac768}{teta\+Compass\+\_\+prev}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_afae537763d72e1c7aa5bddabb567ee76}{teta\+Compass\+Read}}
\begin{DoxyCompactList}\small\item\em variabili bussola \end{DoxyCompactList}\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a0a2c5b7e5415d49d86d1c9a388128712}{modo\+Guida}} = 0
\begin{DoxyCompactList}\small\item\em modiallita\textquotesingle{} di guida\+: odometro, bussola, misto, fusione ... \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab9355e95cf7b931e4ac76a90c7b163c6}{ox}} = 21.\+0
\begin{DoxyCompactList}\small\item\em offset lungo l\textquotesingle{}asse x. viene ricavato a seguito della calibrazione \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a751717b9e3018eb4938a31fba5e636af}{oy}} = 3.\+64
\begin{DoxyCompactList}\small\item\em offset lungo l\textquotesingle{}asse y. viene ricavato a seguito della calibrazione \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a707bc08df1e702c248d1a2225fefc1ce}{ky}} = 1.\+343376
\begin{DoxyCompactList}\small\item\em guadagno lungo asse y. viene ricavato a seguito della calibrazione \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a20aa2804cc392e162754639d1ec564d4}{VA}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a46393dabfdc8b3c70d5811eadaedeaf4}{VB}}
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a095b3da49a4477973982187eae80f87b}{cnt\+Stop}} = 0
\item 
int \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a1ea5d0cb93f22f7d0fdf804bd68c3326}{mode}} = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3e6a2d7b0da74a50b9fd5b16aace4414}{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}}
\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ae2c1c9186b3f289530624f44f4e698d7}{monitor\+Dati}} = 0
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a76da74d153b9813dd1e568a77a05707b}{i\+\_\+part}} = 0
\begin{DoxyCompactList}\small\item\em parte integrale regolatore guida \end{DoxyCompactList}\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aac1a5446ad100de2f39ea367994f0766}{delta\+\_\+teta}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a7fa6816c80e0264d9018d4e59f5a79cd}{deltaS}}
\item 
long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_adb09a635e5dce1cb72809b635590795f}{spd\+Dx\+Cnt}}
\item 
long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ad968c532014efdd0469f8476af86bbbc}{spd\+Sx\+Cnt}}
\begin{DoxyCompactList}\small\item\em velocità encoder, impulsi per tempo di campionamento \end{DoxyCompactList}\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a22cb446e5271d5d2c4b2e23792fb1966}{last\+Time}}
\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a952f8b93b7670156479bc642b5af6ab8}{last\+Time\+Fast}}
\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a458b4f86617930d87d3a7540cd482f64}{time\+Lidar}}
\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_aa30c6b55fe4f49c1e056ee1ae129063f}{time\+Lidar2}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ab50fa34f1f6d47cde8715ac543a3b0dd}{teta\+\_\+}}
\item 
float \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ae431043be26faf1019f48badf3fbfc45}{actual\+Teta\+Ref}}
\item 
char \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_ad2b58fa9c2d105a6d47c2c3b778557c1}{S\+M\+\_\+\+R5}} = 0
\item 
unsigned long \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a91db8b0a01ba006126af6bb35384e18f}{inizio\+Stabilita}}
\item 
sensors\+\_\+event\+\_\+t \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a40ecda65c4ebce49fa139666f210bef0}{event}}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a9af1e62ce938e1b51a846fc15cf307e3}\label{ari_pi__2_d_c__esp__08_8ino_a9af1e62ce938e1b51a846fc15cf307e3}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE@{A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE}}
\index{A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE@{A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE}{ACCELERAZIONE}}
{\footnotesize\ttfamily \#define A\+C\+C\+E\+L\+E\+R\+A\+Z\+I\+O\+NE~160}



valore pwm di uscita durante fase accelerazione (non usato) 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3336677c5466ffd6adee69e68e25f236}\label{ari_pi__2_d_c__esp__08_8ino_a3336677c5466ffd6adee69e68e25f236}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!A\+P\+P\+R\+O\+C\+C\+IO@{A\+P\+P\+R\+O\+C\+C\+IO}}
\index{A\+P\+P\+R\+O\+C\+C\+IO@{A\+P\+P\+R\+O\+C\+C\+IO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{A\+P\+P\+R\+O\+C\+C\+IO}{APPROCCIO}}
{\footnotesize\ttfamily \#define A\+P\+P\+R\+O\+C\+C\+IO~110}



valore pwm di uscita durante marcia A\+P\+P\+R\+O\+C\+C\+IO 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_af5e2c0a692b6b075e9a95ac11a5c5b06}\label{ari_pi__2_d_c__esp__08_8ino_af5e2c0a692b6b075e9a95ac11a5c5b06}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!A\+R\+I3@{A\+R\+I3}}
\index{A\+R\+I3@{A\+R\+I3}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{A\+R\+I3}{ARI3}}
{\footnotesize\ttfamily \#define A\+R\+I3~1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a7d6e95bc7ca024893f2bd7d217b2bd6d}\label{ari_pi__2_d_c__esp__08_8ino_a7d6e95bc7ca024893f2bd7d217b2bd6d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!A\+V\+A\+N\+TI@{A\+V\+A\+N\+TI}}
\index{A\+V\+A\+N\+TI@{A\+V\+A\+N\+TI}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{A\+V\+A\+N\+TI}{AVANTI}}
{\footnotesize\ttfamily \#define A\+V\+A\+N\+TI~0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3da44afeba217135a680a7477b5e3ce3}\label{ari_pi__2_d_c__esp__08_8ino_a3da44afeba217135a680a7477b5e3ce3}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!D\+E\+F\+A\+U\+LT@{D\+E\+F\+A\+U\+LT}}
\index{D\+E\+F\+A\+U\+LT@{D\+E\+F\+A\+U\+LT}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{D\+E\+F\+A\+U\+LT}{DEFAULT}}
{\footnotesize\ttfamily \#define D\+E\+F\+A\+U\+LT~2}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8e296a962daed7fa0ffeeab350593594}\label{ari_pi__2_d_c__esp__08_8ino_a8e296a962daed7fa0ffeeab350593594}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!D\+U\+E\+\_\+\+PI@{D\+U\+E\+\_\+\+PI}}
\index{D\+U\+E\+\_\+\+PI@{D\+U\+E\+\_\+\+PI}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{D\+U\+E\+\_\+\+PI}{DUE\_PI}}
{\footnotesize\ttfamily \#define D\+U\+E\+\_\+\+PI~6.\+28318}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a60736df151b230ad9683a2e8dbee13a6}\label{ari_pi__2_d_c__esp__08_8ino_a60736df151b230ad9683a2e8dbee13a6}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO@{E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO}}
\index{E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO@{E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO}{E\_APPROCCIO}}
{\footnotesize\ttfamily \#define E\+\_\+\+A\+P\+P\+R\+O\+C\+C\+IO~300}



\mbox{[}mm\mbox{]}, distanza dall\textquotesingle{}obbiettivo dove il robot inizia a rallentare 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a140e19c4b6cb883d0f3abceea67a62ba}\label{ari_pi__2_d_c__esp__08_8ino_a140e19c4b6cb883d0f3abceea67a62ba}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO@{E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO}}
\index{E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO@{E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO}{E\_POSIZIONAMENTO}}
{\footnotesize\ttfamily \#define E\+\_\+\+P\+O\+S\+I\+Z\+I\+O\+N\+A\+M\+E\+N\+TO~10}



\mbox{[}mm\mbox{]}, distanza dall\textquotesingle{}obbiettivo dove il robot si arresta 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a5709a7b011efe9859445cf4a2c0646ea}\label{ari_pi__2_d_c__esp__08_8ino_a5709a7b011efe9859445cf4a2c0646ea}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}
\index{E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}{ENB\_L\_SIDE\_FRONT}}
{\footnotesize\ttfamily \#define E\+N\+B\+\_\+\+L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT~28}



abilita frontale Sx 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a551793442f7ac915171c5478f3df0955}\label{ari_pi__2_d_c__esp__08_8ino_a551793442f7ac915171c5478f3df0955}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}
\index{E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}{ENB\_R\_SIDE\_FRONT}}
{\footnotesize\ttfamily \#define E\+N\+B\+\_\+\+R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT~30}



abilita sensore frontale Dx 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3059d914dc801da27fea64290d8f0a28}\label{ari_pi__2_d_c__esp__08_8ino_a3059d914dc801da27fea64290d8f0a28}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+S\+Pserial@{E\+S\+Pserial}}
\index{E\+S\+Pserial@{E\+S\+Pserial}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+S\+Pserial}{ESPserial}}
{\footnotesize\ttfamily \#define E\+S\+Pserial~Serial2}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3ea4f86fda9125c7b34d735b4f14f42a}\label{ari_pi__2_d_c__esp__08_8ino_a3ea4f86fda9125c7b34d735b4f14f42a}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!F\+E\+R\+MO@{F\+E\+R\+MO}}
\index{F\+E\+R\+MO@{F\+E\+R\+MO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{F\+E\+R\+MO}{FERMO}}
{\footnotesize\ttfamily \#define F\+E\+R\+MO~0}



valore pwm di uscita durante stato di F\+E\+R\+MO 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a594090dbf515f41d4249fade4f14c463}\label{ari_pi__2_d_c__esp__08_8ino_a594090dbf515f41d4249fade4f14c463}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN@{G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN}}
\index{G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN@{G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN}{GIRO\_DX\_PIN}}
{\footnotesize\ttfamily \#define G\+I\+R\+O\+\_\+\+D\+X\+\_\+\+P\+IN~3}



encoder rotazione albero motore I\+D\+\_\+009 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab1940449ba61cdf83d35a9dab25b039c}\label{ari_pi__2_d_c__esp__08_8ino_ab1940449ba61cdf83d35a9dab25b039c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN@{G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN}}
\index{G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN@{G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN}{GIRO\_SX\_PIN}}
{\footnotesize\ttfamily \#define G\+I\+R\+O\+\_\+\+S\+X\+\_\+\+P\+IN~2}



encoder rotazione albero motore I\+D\+\_\+009 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8db0e8841207a8e9ce1845ba10b4a637}\label{ari_pi__2_d_c__esp__08_8ino_a8db0e8841207a8e9ce1845ba10b4a637}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!I\+N\+D\+I\+E\+T\+RO@{I\+N\+D\+I\+E\+T\+RO}}
\index{I\+N\+D\+I\+E\+T\+RO@{I\+N\+D\+I\+E\+T\+RO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{I\+N\+D\+I\+E\+T\+RO}{INDIETRO}}
{\footnotesize\ttfamily \#define I\+N\+D\+I\+E\+T\+RO~1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8226ade05454c12b2636c063d60f0050}\label{ari_pi__2_d_c__esp__08_8ino_a8226ade05454c12b2636c063d60f0050}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!K\+P\+\_\+\+D\+EF@{K\+P\+\_\+\+D\+EF}}
\index{K\+P\+\_\+\+D\+EF@{K\+P\+\_\+\+D\+EF}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{K\+P\+\_\+\+D\+EF}{KP\_DEF}}
{\footnotesize\ttfamily \#define K\+P\+\_\+\+D\+EF~8}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a531e2edff1884d356024e8764761ffaa}\label{ari_pi__2_d_c__esp__08_8ino_a531e2edff1884d356024e8764761ffaa}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}
\index{L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}{L\_SIDE\_FRONT}}
{\footnotesize\ttfamily \#define L\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT~29}



sensore frontale Sx 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ad29f66110456ba86205034ad1232fca8}\label{ari_pi__2_d_c__esp__08_8ino_ad29f66110456ba86205034ad1232fca8}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!laser\+Pin@{laser\+Pin}}
\index{laser\+Pin@{laser\+Pin}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{laser\+Pin}{laserPin}}
{\footnotesize\ttfamily \#define laser\+Pin~8}



porta puntatore laser 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a49ba715e713d99d1a5c20429dacaf073}\label{ari_pi__2_d_c__esp__08_8ino_a49ba715e713d99d1a5c20429dacaf073}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!led\+Pin@{led\+Pin}}
\index{led\+Pin@{led\+Pin}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{led\+Pin}{ledPin}}
{\footnotesize\ttfamily \#define led\+Pin~13}



led segnalazioni varie su Arduino 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6f99aa69652bb4f0435fbf31d21ba7c9}\label{ari_pi__2_d_c__esp__08_8ino_a6f99aa69652bb4f0435fbf31d21ba7c9}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!L\+E\+G\+GI@{L\+E\+G\+GI}}
\index{L\+E\+G\+GI@{L\+E\+G\+GI}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{L\+E\+G\+GI}{LEGGI}}
{\footnotesize\ttfamily \#define L\+E\+G\+GI~1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ae69228439056c7947d8c67f0e31cd555}\label{ari_pi__2_d_c__esp__08_8ino_ae69228439056c7947d8c67f0e31cd555}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO@{M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO}}
\index{M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO@{M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO}{MAX\_STERZO}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+S\+T\+E\+R\+ZO~1.\+0}



massimo valore di sterzo. con 1 si ha una ruota ferma e l\textquotesingle{}altra al doppio della velocita\textquotesingle{} 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a4774b749cfc65db93b2e726543c9115f}\label{ari_pi__2_d_c__esp__08_8ino_a4774b749cfc65db93b2e726543c9115f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+O\+D\+E\+R\+A\+TA@{M\+O\+D\+E\+R\+A\+TA}}
\index{M\+O\+D\+E\+R\+A\+TA@{M\+O\+D\+E\+R\+A\+TA}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+O\+D\+E\+R\+A\+TA}{MODERATA}}
{\footnotesize\ttfamily \#define M\+O\+D\+E\+R\+A\+TA~190}



valore pwm di uscita durante marcia M\+O\+D\+E\+R\+A\+TA 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3b5d438b9c0508db7c53e86daa265dc8}\label{ari_pi__2_d_c__esp__08_8ino_a3b5d438b9c0508db7c53e86daa265dc8}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}}
\index{R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT@{R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT}{R\_SIDE\_FRONT}}
{\footnotesize\ttfamily \#define R\+\_\+\+S\+I\+D\+E\+\_\+\+F\+R\+O\+NT~31}



seleziona sensore frontale Dx 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a0795d970ec6b0998fc398ecba0dc1fbc}\label{ari_pi__2_d_c__esp__08_8ino_a0795d970ec6b0998fc398ecba0dc1fbc}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!S\+C\+R\+I\+VI@{S\+C\+R\+I\+VI}}
\index{S\+C\+R\+I\+VI@{S\+C\+R\+I\+VI}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{S\+C\+R\+I\+VI}{SCRIVI}}
{\footnotesize\ttfamily \#define S\+C\+R\+I\+VI~0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_acc60ca04f3ee450b48548582048ed8fa}\label{ari_pi__2_d_c__esp__08_8ino_acc60ca04f3ee450b48548582048ed8fa}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN@{S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN}}
\index{S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN@{S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN}{SERVO\_PAN\_PIN}}
{\footnotesize\ttfamily \#define S\+E\+R\+V\+O\+\_\+\+P\+A\+N\+\_\+\+P\+IN~45}



Digital IO pin connected to the servo pin. 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aacf6d5e66edfb457b13cbced950fc0af}\label{ari_pi__2_d_c__esp__08_8ino_aacf6d5e66edfb457b13cbced950fc0af}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN@{S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN}}
\index{S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN@{S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN}{SERVO\_TILT\_PIN}}
{\footnotesize\ttfamily \#define S\+E\+R\+V\+O\+\_\+\+T\+I\+L\+T\+\_\+\+P\+IN~44}



Digital IO pin connected to the servo pin. 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab6c0fc0e0028f3917b0ce67bee73d01e}\label{ari_pi__2_d_c__esp__08_8ino_ab6c0fc0e0028f3917b0ce67bee73d01e}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO@{T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}}
\index{T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO@{T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}{TEMPO\_CONTROLLO}}
{\footnotesize\ttfamily \#define T\+E\+M\+P\+O\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO~25}



tempo del controllo sterzo, posizione etc in ms 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab57f62e8f32f367dbca255771ff72e20}\label{ari_pi__2_d_c__esp__08_8ino_ab57f62e8f32f367dbca255771ff72e20}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO@{T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}}
\index{T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO@{T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO}{TEST\_CONTROLLO}}
{\footnotesize\ttfamily \#define T\+E\+S\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+LO~3}



modalità di test per fasi di debug 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_adcc6c25175a8908813ff718bc774c2ab}\label{ari_pi__2_d_c__esp__08_8ino_adcc6c25175a8908813ff718bc774c2ab}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR@{T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR}}
\index{T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR@{T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR}{TEST\_GIRO\_SENSOR}}
{\footnotesize\ttfamily \#define T\+E\+S\+T\+\_\+\+G\+I\+R\+O\+\_\+\+S\+E\+N\+S\+OR~4}



modalità di test per fasi di debug 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a61f762ee849a4b411a7cc07d78dde55d}\label{ari_pi__2_d_c__esp__08_8ino_a61f762ee849a4b411a7cc07d78dde55d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE@{T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE}}
\index{T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE@{T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE}{TEST\_MOTORE}}
{\footnotesize\ttfamily \#define T\+E\+S\+T\+\_\+\+M\+O\+T\+O\+RE~0}



modalità di test per fasi di debug 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_addf0ed25cb1de6ac65f3f60a7f50c01a}\label{ari_pi__2_d_c__esp__08_8ino_addf0ed25cb1de6ac65f3f60a7f50c01a}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS@{T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS}}
\index{T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS@{T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS}{TEST\_SENSORS}}
{\footnotesize\ttfamily \#define T\+E\+S\+T\+\_\+\+S\+E\+N\+S\+O\+RS~2}



modalità di test per fasi di debug 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a3e6a2d7b0da74a50b9fd5b16aace4414}\label{ari_pi__2_d_c__esp__08_8ino_a3e6a2d7b0da74a50b9fd5b16aace4414}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO@{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}}
\index{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO@{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}{TEST\_STERZO}}
{\footnotesize\ttfamily \#define T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO~1}



modalità di test per fasi di debug 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a09582c1cafb46dfb44288122f23ed702}\label{ari_pi__2_d_c__esp__08_8ino_a09582c1cafb46dfb44288122f23ed702}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!T\+Fserial@{T\+Fserial}}
\index{T\+Fserial@{T\+Fserial}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{T\+Fserial}{TFserial}}
{\footnotesize\ttfamily \#define T\+Fserial~Serial1}



\subsection{Function Documentation}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8865513d32ebc241dbe80e5bf49ff775}\label{ari_pi__2_d_c__esp__08_8ino_a8865513d32ebc241dbe80e5bf49ff775}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!comandi@{comandi}}
\index{comandi@{comandi}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{comandi()}{comandi()}}
{\footnotesize\ttfamily void comandi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



comandi\+: i comandi assegnano valori o eseguono funzioni. iniziano con un 3 e hanno la lettera maiuscola, sono seguiti da uno o più numeri. non ci sono spazi di separazione. i numeri, se non diversamente indicato, sono floating point, la virgola è data col \textquotesingle{}.\textquotesingle{}, es 3.\+14 


\begin{DoxyParams}{Parameters}
{\em comando} & \begin{DoxyVerb}Axxx: Alfa. assegna Alfa, la direzione del robot. xxx è l'angolo in radianti, es 3.14. La direzione zero è definita all'accensione del robot. E' la direzione in avanti. Coincide con l'asse x.
        Alfa è positivo in senso antiorario.

Bxxx: assegna il guadagno proporzionale KpTeta

Cxxx: assegna "raggiorSterzo" in [m]. La variabile è usata nella movimento R2, stabilisce il raggio della circonferenza su cui ruota il robot.

Dxxx: Distance. La distanza che viene percorsa nel prossimo Run espressa in [mm]. La distanza è sempre incrementale. 

Ex: EEprom.  Esegue operazioni su dei parametri di taratura. Vedi procedura DataEEprom. 

    E0 SCRIVI i parametri in E2prom,            
    E1 LEGGI i parametri in E2prom,             
    E2 rispristina in valori di DEFAULT,            
    E3 mostra i parametri CORRENTI,             
    E4 carica i valori di DEFAULT per il modello ARI02,             
    E5 carica i valori di DEFAULT per il modello ARI03, 

Fnxxx: imposta dei parametri del robot. "n" indica quale parametro, "xxx" è il valore. 

    F0xx ED         
    F1xx ED_BASE            
    F2xx BASELINE           
    F3xx GIRO_RUOTA

Gxxx:   "Guide Mode". definisce il modo di guida nel run "R4". Il teta di feedback, tetaMisura, può provenire dall'odometria, dalla bussola, o altri mix possibili.
        Nel codice sotto teta è l'angolo ricavato dagli encoder.

        Il modo zero si affida alle misure fatte dagli encoder.
        Il modo 1 e 3 ricavano il teta direttamente dalla bussola. Nel modo 3 anche le posizioni x e y 
        sono calcolate dal teta della bussola.
        con il modo 2 è possibile imporre l'angolo corrente come angolo zero. Altrimenti la direzione è
        assoluta come determinata dalla bussola.

        if (modoGuida == 0) tetaMisura = teta;          // ID_001               
        if (modoGuida == 1) tetaMisura = tetaCompass;   // ID_009               
        if (modoGuida == 3) tetaMisura = tetaCompass;   // ID_009               
        if (modoGuida == 2) {                   
            tetaCompass = 0;    // definisco la direzione corrente come zero.                   
            modoGuida   = 1;
            }

        in updatePosition integro posizioni in funzione del modoGuida attivo

        if (modoGuida == 3) {                   
            xpos    +=  deltaC*cos(tetaCompass);                    
            ypos    +=  deltaC*sin(tetaCompass);                    
        }
        else{                   
            xpos    +=  deltaC*cos(teta);                   
            ypos    +=  deltaC*sin(teta);                   
        }

Kxx: K. assegna il guadagno proporzionale kp ustao nel modo Run 1 e 3 (sensore di distanza laterale)

H0:     Homing, assegna lo posizione corrente (x, y, teta) = (0, 0, 0) 

Ixxx;   Integral part. assegna il guadagno della parte integrale kiTeta usato nel modo Run 4.

Lx:     Led. puntatore a Led acceso, x=1, o spento x=0.

Mx:     Monitor. Attiva, 1, o disattiva, 0, l'invio continuo di misure da parte del robot.
        le msiure sono inviate nella routine "updatePosition" ogni 100 ms.
        La stringa ha l'header "mon:"

        if (monitorDati && (counter >=4) ){
        counter = 0;
        risposta  = "mon;";
        risposta += (dDxCnt);
        risposta += (";");
        risposta += (dSxCnt);
        risposta += (";");
        risposta += (deltaC);
        risposta += (";");
        risposta += (teta);
        risposta += (";");
        risposta += (xpos);
        risposta += (";");
        risposta += (ypos);
        risposta += (";");
        risposta += (i_part);// raggiorSterzo
        risposta += (";");

        risposta += event.magnetic.x;
        risposta += ";";
        risposta += event.magnetic.y;
        risposta += ";";
        risposta += event.magnetic.z;
        risposta += ";";
        sendAnswer2(port);
    }

Nnxxx:  assegna i coefficienti di correzione della bussola.
        N0: ox          
        N1: oy          
        N2: ky

Pxxx:   orienta il servo PAN della testa. xxx è in gradi, 90° guarda in avanti, 0 a sinistra e 180 a destra.
        in alcuni casi, a seconda del servo usato, è bene limitare l'escursione ad esempio tra 10 e 170°.

Rx:     Run. Definisce in che modo effettuare la corsa "Run". Il run è definito con un obbiettivo (target).
        Il raggiungimento del target termina il run.

        x=4: R4. Il robot si muove sino a percorrere la distanza impostata con "D" nella direzione alfa impostata con "A".
        x=5: R5. Il robot si muove sino a orientarsi nella direzione alfa impostata con "A". La rotazione fa perno su una ruota che rimane ferma.
        x=6: R6. Il robot si muove sino a orientarsi nella direzione alfa impostata con "A". La rotazione avviene con perno al centro del robot con ruote controrotanti.
        x=2: R2. Il robot effettua un percorso circolare con raggio pari al parametro "C". Il raggiorSterzo può anche essere
                 imposto direttamente con il comando "S". In questo caso sarà lo scorrimento tra le ruote dx e sx.

        i modi 1 e 3 fanno viaggiare il robot a una distanza fissa dalla parete laterale. la misura è fatta orinetando il LIDAR.
        i due modi devono essere rivisti a a causa del nuovo sensore usato.

        x=99: provoca l'arresto del movimento

        Il movimento si arresta quando il lidar vede un ostacolo troppo vicino.

        if (lidardist<50.0 && (statoRun != 5) &&(statoRun != 6) &&(statoRun != 0))
            {
                statoRun        = 99;   // senza rampa                  
                motorSpeed      = 0;    // annullo rampa                    
                motorSpeedRef   = 0;                    
                risposta        = "ostacolo";                   
                sendAnswer2(port);                  
            }

Sxxx:   Scorrimento. Imposta direttamente la varibile "raggiDiSterzo". è un numero tra -1 e 1. 
        Zero significa scorrimento nullo, cioè le due ruote hanno la stessa velocità comandata.
        vedi procedura "differenziale"

        ponendo s = raggiorSterzo abbiamo che le velocita' alle ruote valgono:

            VA = motorSpeed*(1-s)           
            VB = motorSpeed*(1+s)       

Txxx:   orienta il servo TILT della testa. xxx è in gradi, 90° guarda in avanti, 0 a sinistra e 180 a destra.
        in alcuni casi, a seconda del servo usato, è bene limitare l'escursione ad esempio tra 10 e 170°.

Vxxx:   Velocità. Definisce la velocità del robot. é il valore assegnato al PWM.    

Zxxx:   definisce MAX_S. è il limite dello scorrimento (positivo e negativo) applicabile dal controllo.\end{DoxyVerb}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ada2502f03f6e1fe62fef80b03f317b98}\label{ari_pi__2_d_c__esp__08_8ino_ada2502f03f6e1fe62fef80b03f317b98}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!compass@{compass}}
\index{compass@{compass}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{compass()}{compass()}}
{\footnotesize\ttfamily void compass (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Gets the most recent sensor values and transform in angle. 

This function reads only x and y magnetometer values. The coefficients for correction are applied.

the output is teta\+Compass which is a global variable.

ox\+: offet on x axis

oy\+: offset on y axis

ky\+: gain on y axis


\begin{DoxyParams}{Parameters}
{\em none} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none. The output valie is on teta\+Compass global variable 
\end{DoxyReturn}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a24f4d37ce4673eadaa4043cf6ecaff27}\label{ari_pi__2_d_c__esp__08_8ino_a24f4d37ce4673eadaa4043cf6ecaff27}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!Data\+E\+Eprom@{Data\+E\+Eprom}}
\index{Data\+E\+Eprom@{Data\+E\+Eprom}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{Data\+E\+Eprom()}{DataEEprom()}}
{\footnotesize\ttfamily void Data\+E\+Eprom (\begin{DoxyParamCaption}\item[{char}]{comando }\end{DoxyParamCaption})}



gestisce dei valori sulle E2prom. I vengono letti e scritti nello stesso ordine. La procedura gestisce anche il valore di default. letti i valori si procede ad aggiornare i parametri dipendenti dai valori assegnati. Questa procedura viene chiamata al termine dell\textquotesingle{} start\+Up con comando L\+E\+G\+GI. Vengono quindi attivati i parametri salvati in E\+Eprom. 


\begin{DoxyParams}{Parameters}
{\em comando} & \begin{DoxyVerb}i comandi sono:

SCRIVI  0

LEGGI   1

DEFAULT 2

temporaneamente i valori 4 e 5 caricano dei valori di default calibrati su due macchine. 4 ARI_02, 5 ARI_03\end{DoxyVerb}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_af117273d2066fa1917036ae9a9742ae7}\label{ari_pi__2_d_c__esp__08_8ino_af117273d2066fa1917036ae9a9742ae7}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!differenziale@{differenziale}}
\index{differenziale@{differenziale}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{differenziale()}{differenziale()}}
{\footnotesize\ttfamily void differenziale (\begin{DoxyParamCaption}\item[{float}]{motor\+Speed }\end{DoxyParamCaption})}



sterzo con differenziale. Per curvare la velocità relativa delle due ruote viene modificata. Con le velocità uguali proseguo diritto, con una maggiore dell\textquotesingle{}altra curvo. 

raggior\+Sterzo (variabile globale) indica lo scorrimento che applichiamo alle ruote. E\textquotesingle{} un numero tra 0 e 2.

ponendo s = raggior\+Sterzo abbiamo che le velocita\textquotesingle{} alle ruote valgono\+:

VA = motor\+Speed$\ast$(1-\/s)

VB = motor\+Speed$\ast$(1+s)

In funzione di Stato\+Run si hanno diversi modi operativi

Stato\+Run .. \+: differenziale in funzione di raggior\+Sterzo

Stato\+Run == 5\+: curva con una ruota ferma

Stato\+Run == 6\+: curva con ruote controrotanti


\begin{DoxyParams}{Parameters}
{\em motor\+Speed.} & Il valore a cui limitare la velocita\textquotesingle{} massima applicata ai motori. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ac3a1af41d00b96587bf75bad54078a1f}\label{ari_pi__2_d_c__esp__08_8ino_ac3a1af41d00b96587bf75bad54078a1f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!display\+Sensor\+Details@{display\+Sensor\+Details}}
\index{display\+Sensor\+Details@{display\+Sensor\+Details}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{display\+Sensor\+Details()}{displaySensorDetails()}}
{\footnotesize\ttfamily void display\+Sensor\+Details (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a64ea2b252b5ab59be204f70e2206ce1c}\label{ari_pi__2_d_c__esp__08_8ino_a64ea2b252b5ab59be204f70e2206ce1c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!get\+Cmd2@{get\+Cmd2}}
\index{get\+Cmd2@{get\+Cmd2}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{get\+Cmd2()}{getCmd2()}}
{\footnotesize\ttfamily void get\+Cmd2 (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



quando arriva una stringa da E\+SP la processa. Il protocollo usato è in A\+S\+C\+II permette di inviare comandi o richieste. ~\newline
 Il primo carattere indica se richiesta (1) o comando (3). 

I caratteri successivi vengono passati alle routine dedicate che eseguono il comando e preparano la stringa \char`\"{}risposta\char`\"{}.

questa viene ritornata dalla funzione send\+Answer2 \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a5b51c469eb312609df7a037c33bde58d}\label{ari_pi__2_d_c__esp__08_8ino_a5b51c469eb312609df7a037c33bde58d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!get\+Sensor\+Reading@{get\+Sensor\+Reading}}
\index{get\+Sensor\+Reading@{get\+Sensor\+Reading}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{get\+Sensor\+Reading()}{getSensorReading()}}
{\footnotesize\ttfamily void get\+Sensor\+Reading (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a23abf4b5bc87f963b0270c015e379872}\label{ari_pi__2_d_c__esp__08_8ino_a23abf4b5bc87f963b0270c015e379872}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!lidar@{lidar}}
\index{lidar@{lidar}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{lidar()}{lidar()}}
{\footnotesize\ttfamily String lidar (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



libreria lettura lidar 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a0f6c65484953fd460fd89ee3a1a3825e}\label{ari_pi__2_d_c__esp__08_8ino_a0f6c65484953fd460fd89ee3a1a3825e}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!lidar\+Misura\+Amb@{lidar\+Misura\+Amb}}
\index{lidar\+Misura\+Amb@{lidar\+Misura\+Amb}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{lidar\+Misura\+Amb()}{lidarMisuraAmb()}}
{\footnotesize\ttfamily String lidar\+Misura\+Amb (\begin{DoxyParamCaption}\item[{int}]{numero\+Misure,  }\item[{int}]{ang }\end{DoxyParamCaption})}



legge il lidar e prepara la stringa di risposta. 

inizializza la stringa di risposta come \char`\"{}echo-\/\char`\"{}+\+String(ang)+\char`\"{}-\/\char`\"{};

effettua dapprima 10 letture a vuoto,

appende \char`\"{}numero\+Misure\char`\"{} misure alla risposta ognuna separata da \char`\"{}-\/\char`\"{}


\begin{DoxyParams}{Parameters}
{\em numero\+Misure} & su cui viene \\
\hline
{\em ang} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_afe461d27b9c48d5921c00d521181f12f}\label{ari_pi__2_d_c__esp__08_8ino_afe461d27b9c48d5921c00d521181f12f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!loop@{loop}}
\index{loop@{loop}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily void loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

gestione comunicazione con E\+SP

gestione comunicazione con E\+SP

assegna angoli a pan e tilt

funzionamento corrente con anelli di controllo attivi

test e azione ostacoli frontali

stato\+Run

il movimento è gestito da una macchina a stati. Lo stato iniziale è fermo.

0\+: fermo 1\+: controllo sterzo da sensore dx e distanza automatico (non attivo) 1\+: controllo sterzo da sensore sx e distanza automatico (non attivo) 2\+: controllo distanza, sterzo da parametro 4\+: controllo distanza, sterzo da parametro da teta\+Ref vs teta odometria 5\+: rotazione sul posto con una ruota ferma 6\+: rotazione sul posto con ruote controrotanti

99\+: comando arresto

gestione raggiungimento angolo target in questo caso il robot deve ruotare per orientarsi con l\textquotesingle{}angolo dato. Questo vale per i modi 5 e 6.

All\textquotesingle{}approsimarsi della destinazione la velocità viene diminuita per raggiungere il target senza superarlo. ~\newline
~\newline
~\newline
~\newline


gestione raggiungimento distanza target in questo caso il robot deve arrivare alla distanza impostata. Questo vale per i modi (1, 3, 2, 4). Sono esclusi i 5 e 6 che ruotano il robot e sono gestiti nei modi 5 e 6 da una propria macchina a stati.

All\textquotesingle{}approsimarsi della destinazione la velocità viene diminuita per raggiungere il target senza superarlo. ~\newline
~\newline
~\newline


questa parte genera le rampe sulla tensione del motore. Sia in accelerazione che decelerazione. Viene fatta girare con un tempo piu\textquotesingle{} veloce per poter usare gradini di riferimento più piccoli. All\textquotesingle{}arrivo a velocità zero la macchina a stati del movimento viene messa nello stato iniziale.

modo di test. viene usato durante il debug dell\textquotesingle{}hw. viene configurato alla bisogna. I comandi arrivano diretti dalla seriale e codificati comenecessario.\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6af06b46b74b5a44e1adc270e1e07e6b}\label{ari_pi__2_d_c__esp__08_8ino_a6af06b46b74b5a44e1adc270e1e07e6b}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro\+Dx\+Misura\+HW@{odometro\+Dx\+Misura\+HW}}
\index{odometro\+Dx\+Misura\+HW@{odometro\+Dx\+Misura\+HW}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro\+Dx\+Misura\+H\+W()}{odometroDxMisuraHW()}}
{\footnotesize\ttfamily void odometro\+Dx\+Misura\+HW (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



odometri 

la misura della posizione viene fatta leggendo gli impulsi prodotti dagli encoder rotativi montati sull\textquotesingle{}albero delle ruote. Gli encoder sono dischi con delle fessure regolari. Queste interrompono a tartti il fascio luminoso sul sensore optoelettronico. Ogni transizione genera un interrupt su Arduino. Contando il numero degli impulsi letti si misura lo spazio percorso. La direzione dipende dalla tensione applicata al motore. Gli impulsi vengono sommati in un caso e sottratti nell\textquotesingle{}altro.

Il flag Vx\+\_\+zero indica queando il motore è fermo. In questo caso si evitano i conteggi per evitarne di falsi. Se gli impulsi giugono troppo velocemente vengono considerati errori.

La routine incremmenta contatori di interi per essere veloce. \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aef8d9e68883244c4d12fb9dfb14b0b2e}\label{ari_pi__2_d_c__esp__08_8ino_aef8d9e68883244c4d12fb9dfb14b0b2e}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro\+Sx\+Misura\+HW@{odometro\+Sx\+Misura\+HW}}
\index{odometro\+Sx\+Misura\+HW@{odometro\+Sx\+Misura\+HW}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro\+Sx\+Misura\+H\+W()}{odometroSxMisuraHW()}}
{\footnotesize\ttfamily void odometro\+Sx\+Misura\+HW (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



vedi Sx 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_abbdedc0823a18fd32dee96e0acad447e}\label{ari_pi__2_d_c__esp__08_8ino_abbdedc0823a18fd32dee96e0acad447e}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!print\+Dati\+Calibrazione@{print\+Dati\+Calibrazione}}
\index{print\+Dati\+Calibrazione@{print\+Dati\+Calibrazione}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{print\+Dati\+Calibrazione()}{printDatiCalibrazione()}}
{\footnotesize\ttfamily void print\+Dati\+Calibrazione (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a9d7193cecd4d57fda8e39dc98a236253}\label{ari_pi__2_d_c__esp__08_8ino_a9d7193cecd4d57fda8e39dc98a236253}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!richieste@{richieste}}
\index{richieste@{richieste}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{richieste()}{richieste()}}
{\footnotesize\ttfamily void richieste (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ae29b9282fc7ede860a2bb8984ad0560c}\label{ari_pi__2_d_c__esp__08_8ino_ae29b9282fc7ede860a2bb8984ad0560c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!r\+Seriale@{r\+Seriale}}
\index{r\+Seriale@{r\+Seriale}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{r\+Seriale()}{rSeriale()}}
{\footnotesize\ttfamily void r\+Seriale (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



riceve i caratteri dalla seriale dell\textquotesingle{}E\+SP. Il char \textquotesingle{}!\textquotesingle{} è l\textquotesingle{}inizio stringa, il \textquotesingle{}?\textquotesingle{} è il terminatore della stringa. il terminatore della stringa è ? 

All\textquotesingle{}arrivo dello start la stringa pulita e inizia l\textquotesingle{}accumolo dei caratteri

All\textquotesingle{}arrivo del terminatore la stringa viene resa disponibile in \char`\"{}input\+String\char`\"{}

! {\itshape flush}

? {\itshape terminatore}

N.\+B. il codice su esp oltre a dispacciare i pacchetti giunti dal Wi\+Fi verso Arduino effettuata anche un filtraggio e una generazione di richieste. filtraggio\+: I pacchetti che iniziano !$>$ sono destinati all\textquotesingle{}esp e sono quindi trattati sull\textquotesingle{}esp stesso. generazione di richieste\+: a tempo l\textquotesingle{}esp richiede a Arduino delle informazioni che poi invia al client.

per dettagli su questa parte vedi codice esp.. \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a914ee45b85c8745eaee35cdef279a276}\label{ari_pi__2_d_c__esp__08_8ino_a914ee45b85c8745eaee35cdef279a276}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!send\+Answer2@{send\+Answer2}}
\index{send\+Answer2@{send\+Answer2}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{send\+Answer2()}{sendAnswer2()}}
{\footnotesize\ttfamily void send\+Answer2 (\begin{DoxyParamCaption}\item[{char}]{port }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a4fc01d736fe50cf5b977f755b675f11d}\label{ari_pi__2_d_c__esp__08_8ino_a4fc01d736fe50cf5b977f755b675f11d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!setup@{setup}}
\index{setup@{setup}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



setup della parte hardware e caricamento coefficienti da E2prom 

5 A\+R\+I3, 4 A\+R\+I2 carica coefficienti da e2prom \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6f20cd3646bc1f8af9a4f9d5e45f5c90}\label{ari_pi__2_d_c__esp__08_8ino_a6f20cd3646bc1f8af9a4f9d5e45f5c90}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!test\+Ostacoli@{test\+Ostacoli}}
\index{test\+Ostacoli@{test\+Ostacoli}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{test\+Ostacoli()}{testOstacoli()}}
{\footnotesize\ttfamily void test\+Ostacoli (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



riporta al controller la distanza letta dal lidar, la risposta ha formato \char`\"{}mis;\char`\"{} + distanza in cm\char`\"{}.
aggiorna anche la il valore \char`\"{}lidardist" ogni 250 ms. 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a1961cf99cc4edb6f9f48ea4b3ec3112c}\label{ari_pi__2_d_c__esp__08_8ino_a1961cf99cc4edb6f9f48ea4b3ec3112c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!update\+Position@{update\+Position}}
\index{update\+Position@{update\+Position}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{update\+Position()}{updatePosition()}}
{\footnotesize\ttfamily void update\+Position (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



\subsection{Variable Documentation}
\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ae431043be26faf1019f48badf3fbfc45}\label{ari_pi__2_d_c__esp__08_8ino_ae431043be26faf1019f48badf3fbfc45}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!actual\+Teta\+Ref@{actual\+Teta\+Ref}}
\index{actual\+Teta\+Ref@{actual\+Teta\+Ref}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{actual\+Teta\+Ref}{actualTetaRef}}
{\footnotesize\ttfamily float actual\+Teta\+Ref}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a9c5bc38bd76775bbcb1e430646060ca5}\label{ari_pi__2_d_c__esp__08_8ino_a9c5bc38bd76775bbcb1e430646060ca5}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!B\+A\+S\+E\+L\+I\+NE@{B\+A\+S\+E\+L\+I\+NE}}
\index{B\+A\+S\+E\+L\+I\+NE@{B\+A\+S\+E\+L\+I\+NE}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{B\+A\+S\+E\+L\+I\+NE}{BASELINE}}
{\footnotesize\ttfamily float B\+A\+S\+E\+L\+I\+NE = 130.\+0}

larghezza carreggiata in \mbox{[}mm\mbox{]}. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a095b3da49a4477973982187eae80f87b}\label{ari_pi__2_d_c__esp__08_8ino_a095b3da49a4477973982187eae80f87b}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!cnt\+Stop@{cnt\+Stop}}
\index{cnt\+Stop@{cnt\+Stop}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{cnt\+Stop}{cntStop}}
{\footnotesize\ttfamily int cnt\+Stop = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aac1a5446ad100de2f39ea367994f0766}\label{ari_pi__2_d_c__esp__08_8ino_aac1a5446ad100de2f39ea367994f0766}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!delta\+\_\+teta@{delta\+\_\+teta}}
\index{delta\+\_\+teta@{delta\+\_\+teta}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{delta\+\_\+teta}{delta\_teta}}
{\footnotesize\ttfamily float delta\+\_\+teta}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_affc72d7637b810bd21ce037f035b6e0a}\label{ari_pi__2_d_c__esp__08_8ino_affc72d7637b810bd21ce037f035b6e0a}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!delta\+Compass@{delta\+Compass}}
\index{delta\+Compass@{delta\+Compass}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{delta\+Compass}{deltaCompass}}
{\footnotesize\ttfamily float delta\+Compass}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a7fa6816c80e0264d9018d4e59f5a79cd}\label{ari_pi__2_d_c__esp__08_8ino_a7fa6816c80e0264d9018d4e59f5a79cd}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!deltaS@{deltaS}}
\index{deltaS@{deltaS}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{deltaS}{deltaS}}
{\footnotesize\ttfamily float deltaS}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6505c8e9ac66c5a6ac679bc41647f100}\label{ari_pi__2_d_c__esp__08_8ino_a6505c8e9ac66c5a6ac679bc41647f100}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!direzione@{direzione}}
\index{direzione@{direzione}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{direzione}{direzione}}
{\footnotesize\ttfamily int direzione = 1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6e9c7be6c7c4f653f9d3ca70006130e6}\label{ari_pi__2_d_c__esp__08_8ino_a6e9c7be6c7c4f653f9d3ca70006130e6}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!dir\+VA@{dir\+VA}}
\index{dir\+VA@{dir\+VA}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{dir\+VA}{dirVA}}
{\footnotesize\ttfamily int dir\+VA = 1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aaf30ecc1398dffba96805a9ce60d1480}\label{ari_pi__2_d_c__esp__08_8ino_aaf30ecc1398dffba96805a9ce60d1480}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!dir\+VB@{dir\+VB}}
\index{dir\+VB@{dir\+VB}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{dir\+VB}{dirVB}}
{\footnotesize\ttfamily int dir\+VB = 1}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa0ded4438d2bf98ac92bf5e3680d5084}\label{ari_pi__2_d_c__esp__08_8ino_aa0ded4438d2bf98ac92bf5e3680d5084}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!distanza@{distanza}}
\index{distanza@{distanza}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{distanza}{distanza}}
{\footnotesize\ttfamily float distanza = 0}



distanza da percorrere col prossio Run 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ac547551c409b3659bcfa04a597e8d76b}\label{ari_pi__2_d_c__esp__08_8ino_ac547551c409b3659bcfa04a597e8d76b}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!driver@{driver}}
\index{driver@{driver}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{driver}{driver}}
{\footnotesize\ttfamily D\+R\+V8833 driver = D\+R\+V8833()}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a46145722dc21eed1a702b867ced59e49}\label{ari_pi__2_d_c__esp__08_8ino_a46145722dc21eed1a702b867ced59e49}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!ED@{ED}}
\index{ED@{ED}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{ED}{ED}}
{\footnotesize\ttfamily float ED = 1.\+0}

definiscono la meccanica del robot. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aab9585a72373b934a8e78ac806c57f50}\label{ari_pi__2_d_c__esp__08_8ino_aab9585a72373b934a8e78ac806c57f50}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!E\+D\+\_\+\+B\+A\+SE@{E\+D\+\_\+\+B\+A\+SE}}
\index{E\+D\+\_\+\+B\+A\+SE@{E\+D\+\_\+\+B\+A\+SE}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{E\+D\+\_\+\+B\+A\+SE}{ED\_BASE}}
{\footnotesize\ttfamily float E\+D\+\_\+\+B\+A\+SE = 1.\+0}

definiscono la meccanica del robot. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a249abd6fb895eba5af34eb2516a7dea3}\label{ari_pi__2_d_c__esp__08_8ino_a249abd6fb895eba5af34eb2516a7dea3}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!errore@{errore}}
\index{errore@{errore}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{errore}{errore}}
{\footnotesize\ttfamily float errore}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a40ecda65c4ebce49fa139666f210bef0}\label{ari_pi__2_d_c__esp__08_8ino_a40ecda65c4ebce49fa139666f210bef0}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!event@{event}}
\index{event@{event}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{event}{event}}
{\footnotesize\ttfamily sensors\+\_\+event\+\_\+t event}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a7acc771f00b743e5b3e0d2512eb5329b}\label{ari_pi__2_d_c__esp__08_8ino_a7acc771f00b743e5b3e0d2512eb5329b}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!first\+Run@{first\+Run}}
\index{first\+Run@{first\+Run}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{first\+Run}{firstRun}}
{\footnotesize\ttfamily char first\+Run}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ac57aebfcef0c4d31360b170366395c4a}\label{ari_pi__2_d_c__esp__08_8ino_ac57aebfcef0c4d31360b170366395c4a}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!G\+I\+R\+O\+\_\+\+R\+U\+O\+TA@{G\+I\+R\+O\+\_\+\+R\+U\+O\+TA}}
\index{G\+I\+R\+O\+\_\+\+R\+U\+O\+TA@{G\+I\+R\+O\+\_\+\+R\+U\+O\+TA}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{G\+I\+R\+O\+\_\+\+R\+U\+O\+TA}{GIRO\_RUOTA}}
{\footnotesize\ttfamily float G\+I\+R\+O\+\_\+\+R\+U\+O\+TA = 1.\+0}

(G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX + G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX)/2. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a87caded4c49d6deea703487e7f11d9e3}\label{ari_pi__2_d_c__esp__08_8ino_a87caded4c49d6deea703487e7f11d9e3}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX@{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX}}
\index{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX@{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX}{GIRO\_RUOTA\_DX}}
{\footnotesize\ttfamily float G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX = 1.\+0}

\mbox{[}mm per impulso$\ast$0.5\mbox{]} sviluppo ruota\mbox{[}mm\mbox{]}/(2$\ast$ppr) (pulses per revolution)\mbox{]}. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aeee767366b9e5e9bb8022b27fcbb7e68}\label{ari_pi__2_d_c__esp__08_8ino_aeee767366b9e5e9bb8022b27fcbb7e68}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX@{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX}}
\index{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX@{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX}{GIRO\_RUOTA\_SX}}
{\footnotesize\ttfamily float G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX = 1.\+0}

\mbox{[}mm per impulso$\ast$0.5\mbox{]} sviluppo ruota\mbox{[}mm\mbox{]}/(2$\ast$ppr) (pulses per revolution)\mbox{]}. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a76da74d153b9813dd1e568a77a05707b}\label{ari_pi__2_d_c__esp__08_8ino_a76da74d153b9813dd1e568a77a05707b}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!i\+\_\+part@{i\+\_\+part}}
\index{i\+\_\+part@{i\+\_\+part}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{i\+\_\+part}{i\_part}}
{\footnotesize\ttfamily float i\+\_\+part = 0}



parte integrale regolatore guida 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a91db8b0a01ba006126af6bb35384e18f}\label{ari_pi__2_d_c__esp__08_8ino_a91db8b0a01ba006126af6bb35384e18f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!inizio\+Stabilita@{inizio\+Stabilita}}
\index{inizio\+Stabilita@{inizio\+Stabilita}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{inizio\+Stabilita}{inizioStabilita}}
{\footnotesize\ttfamily unsigned long inizio\+Stabilita}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_abfa7bc4032f1ef9070aa48a183f30d4a}\label{ari_pi__2_d_c__esp__08_8ino_abfa7bc4032f1ef9070aa48a183f30d4a}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!input\+String@{input\+String}}
\index{input\+String@{input\+String}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{input\+String}{inputString}}
{\footnotesize\ttfamily String input\+String = \char`\"{}\char`\"{}}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a54b4b16653970eab34e2ba40199fd6f3}\label{ari_pi__2_d_c__esp__08_8ino_a54b4b16653970eab34e2ba40199fd6f3}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!input\+String\+Tmp@{input\+String\+Tmp}}
\index{input\+String\+Tmp@{input\+String\+Tmp}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{input\+String\+Tmp}{inputStringTmp}}
{\footnotesize\ttfamily String input\+String\+Tmp = \char`\"{}\char`\"{}}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ad59a70cc86150e574e73066bf9b92062}\label{ari_pi__2_d_c__esp__08_8ino_ad59a70cc86150e574e73066bf9b92062}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!ki\+Teta@{ki\+Teta}}
\index{ki\+Teta@{ki\+Teta}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{ki\+Teta}{kiTeta}}
{\footnotesize\ttfamily float ki\+Teta = 0.\+02}



guadagno integrale per controllo su teta 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a1f7add0f84d583bc2eceb290d6c4cc06}\label{ari_pi__2_d_c__esp__08_8ino_a1f7add0f84d583bc2eceb290d6c4cc06}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!kp@{kp}}
\index{kp@{kp}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{kp}{kp}}
{\footnotesize\ttfamily float kp = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a8226ade05454c12b2636c063d60f0050}{K\+P\+\_\+\+D\+EF}}}



guadagno proporzionale per controllo su distanza muro 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6f825712ede5cd29e0ee8a3b8603fa5f}\label{ari_pi__2_d_c__esp__08_8ino_a6f825712ede5cd29e0ee8a3b8603fa5f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!kp\+Teta@{kp\+Teta}}
\index{kp\+Teta@{kp\+Teta}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{kp\+Teta}{kpTeta}}
{\footnotesize\ttfamily float kp\+Teta = 2.\+0}



guadagno proporzionale per controllo su teta 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a707bc08df1e702c248d1a2225fefc1ce}\label{ari_pi__2_d_c__esp__08_8ino_a707bc08df1e702c248d1a2225fefc1ce}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!ky@{ky}}
\index{ky@{ky}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{ky}{ky}}
{\footnotesize\ttfamily float ky = 1.\+343376}



guadagno lungo asse y. viene ricavato a seguito della calibrazione 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a023cb7e635b51ac94b3e22f2b6ac8f9c}\label{ari_pi__2_d_c__esp__08_8ino_a023cb7e635b51ac94b3e22f2b6ac8f9c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI@{L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI}}
\index{L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI@{L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI}{LAGHEZZA\_A\_MEZZI}}
{\footnotesize\ttfamily float L\+A\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+ZI = 0.\+065}

larghezza meta\textquotesingle{} carreggiata in \mbox{[}m\mbox{]}. descrizione nella parte cinematica \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa9eb73e0d7151ab1d50ab7d71114e6bd}\label{ari_pi__2_d_c__esp__08_8ino_aa9eb73e0d7151ab1d50ab7d71114e6bd}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!laser@{laser}}
\index{laser@{laser}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{laser}{laser}}
{\footnotesize\ttfamily char laser = 0}



stato uscita puntatore laser 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a22cb446e5271d5d2c4b2e23792fb1966}\label{ari_pi__2_d_c__esp__08_8ino_a22cb446e5271d5d2c4b2e23792fb1966}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!last\+Time@{last\+Time}}
\index{last\+Time@{last\+Time}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{last\+Time}{lastTime}}
{\footnotesize\ttfamily unsigned long last\+Time}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a952f8b93b7670156479bc642b5af6ab8}\label{ari_pi__2_d_c__esp__08_8ino_a952f8b93b7670156479bc642b5af6ab8}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!last\+Time\+Fast@{last\+Time\+Fast}}
\index{last\+Time\+Fast@{last\+Time\+Fast}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{last\+Time\+Fast}{lastTimeFast}}
{\footnotesize\ttfamily unsigned long last\+Time\+Fast}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a4a8018086ebb57f68726715ade9fc53d}\label{ari_pi__2_d_c__esp__08_8ino_a4a8018086ebb57f68726715ade9fc53d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!lidardist@{lidardist}}
\index{lidardist@{lidardist}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{lidardist}{lidardist}}
{\footnotesize\ttfamily float lidardist = 0.\+0}



\mbox{[}cm\mbox{]} distanza misurata dal Lidar 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8358c2402fb15c1b0f5fbbfb0a1e6a85}\label{ari_pi__2_d_c__esp__08_8ino_a8358c2402fb15c1b0f5fbbfb0a1e6a85}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!mag@{mag}}
\index{mag@{mag}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{mag}{mag}}
{\footnotesize\ttfamily Adafruit\+\_\+\+L\+S\+M303\+\_\+\+Mag\+\_\+\+Unified mag = Adafruit\+\_\+\+L\+S\+M303\+\_\+\+Mag\+\_\+\+Unified(12345)}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a33a1abc735507147bab601374a138b09}\label{ari_pi__2_d_c__esp__08_8ino_a33a1abc735507147bab601374a138b09}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+A\+X\+\_\+S@{M\+A\+X\+\_\+S}}
\index{M\+A\+X\+\_\+S@{M\+A\+X\+\_\+S}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+A\+X\+\_\+S}{MAX\_S}}
{\footnotesize\ttfamily float M\+A\+X\+\_\+S = 0.\+2}



max\+\_\+s = L\+A\+R\+G\+H\+E\+Z\+Z\+A\+\_\+\+A\+\_\+\+M\+E\+Z\+Z\+I/\+Raggio massimo 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6a8d27409d947dce17cce28a56701a5c}\label{ari_pi__2_d_c__esp__08_8ino_a6a8d27409d947dce17cce28a56701a5c}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE@{M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE}}
\index{M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE@{M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE}{MIN\_TIME\_TRA\_PULSE}}
{\footnotesize\ttfamily unsigned long M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE = 9}

tempo minimo tra impulsi encoder per evitare errate letture \mbox{[}ms\mbox{]}

aggiorno per encoder da 35 ppr prima erano 20 /$\ast$ ari 1 con encoder da 20 ppr \#define G\+I\+R\+O\+\_\+\+R\+U\+O\+TA 2.\+625 // 20ppr 5.\+25 // mm per impulso$\ast$0.5 = sviluppo ruota\mbox{[}mm\mbox{]}/ppr (pulsi per rivoluzione) \#define G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+DX 2.\+625 // 20ppr 5.\+25 \#define G\+I\+R\+O\+\_\+\+R\+U\+O\+T\+A\+\_\+\+SX 2.\+615 // 20ppr 5.\+25 \#define M\+I\+N\+\_\+\+T\+I\+M\+E\+\_\+\+T\+R\+A\+\_\+\+P\+U\+L\+SE 9 // 20 ppr 18 // tempo minimo tra impulsi encoder per evitare errate letture \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a1ea5d0cb93f22f7d0fdf804bd68c3326}\label{ari_pi__2_d_c__esp__08_8ino_a1ea5d0cb93f22f7d0fdf804bd68c3326}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!mode@{mode}}
\index{mode@{mode}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{mode}{mode}}
{\footnotesize\ttfamily int mode = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a3e6a2d7b0da74a50b9fd5b16aace4414}{T\+E\+S\+T\+\_\+\+S\+T\+E\+R\+ZO}}}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a0a2c5b7e5415d49d86d1c9a388128712}\label{ari_pi__2_d_c__esp__08_8ino_a0a2c5b7e5415d49d86d1c9a388128712}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!modo\+Guida@{modo\+Guida}}
\index{modo\+Guida@{modo\+Guida}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{modo\+Guida}{modoGuida}}
{\footnotesize\ttfamily char modo\+Guida = 0}



modiallita\textquotesingle{} di guida\+: odometro, bussola, misto, fusione ... 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ae2c1c9186b3f289530624f44f4e698d7}\label{ari_pi__2_d_c__esp__08_8ino_ae2c1c9186b3f289530624f44f4e698d7}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!monitor\+Dati@{monitor\+Dati}}
\index{monitor\+Dati@{monitor\+Dati}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{monitor\+Dati}{monitorDati}}
{\footnotesize\ttfamily char monitor\+Dati = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8dfd382ee3674a1db48ad2c69bcaaf56}\label{ari_pi__2_d_c__esp__08_8ino_a8dfd382ee3674a1db48ad2c69bcaaf56}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!motor\+Speed@{motor\+Speed}}
\index{motor\+Speed@{motor\+Speed}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{motor\+Speed}{motorSpeed}}
{\footnotesize\ttfamily int motor\+Speed = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ac179a794839296fb9b090264967b2dd9}\label{ari_pi__2_d_c__esp__08_8ino_ac179a794839296fb9b090264967b2dd9}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!motor\+Speed\+Ref@{motor\+Speed\+Ref}}
\index{motor\+Speed\+Ref@{motor\+Speed\+Ref}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{motor\+Speed\+Ref}{motorSpeedRef}}
{\footnotesize\ttfamily int motor\+Speed\+Ref = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6c202cc2e1ecd2889d313233e5360ae9}\label{ari_pi__2_d_c__esp__08_8ino_a6c202cc2e1ecd2889d313233e5360ae9}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!motor\+Speed\+Value@{motor\+Speed\+Value}}
\index{motor\+Speed\+Value@{motor\+Speed\+Value}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{motor\+Speed\+Value}{motorSpeedValue}}
{\footnotesize\ttfamily int motor\+Speed\+Value = \mbox{\hyperlink{ari_pi__2_d_c__esp__08_8ino_a4774b749cfc65db93b2e726543c9115f}{M\+O\+D\+E\+R\+A\+TA}}}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab8a00bd06cb46156aa7cb936b4eb8c85}\label{ari_pi__2_d_c__esp__08_8ino_ab8a00bd06cb46156aa7cb936b4eb8c85}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1@{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1}}
\index{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1@{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1}{MTR\_A\_DX\_P1}}
{\footnotesize\ttfamily const int M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P1 = 5}

output pin 1 for right motor \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a1daadb07ea3186bedb91de1bbfb47b58}\label{ari_pi__2_d_c__esp__08_8ino_a1daadb07ea3186bedb91de1bbfb47b58}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2@{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2}}
\index{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2@{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2}{MTR\_A\_DX\_P2}}
{\footnotesize\ttfamily const int M\+T\+R\+\_\+\+A\+\_\+\+D\+X\+\_\+\+P2 = 6}

output pin 2 for right motor \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8b68fd0f29306f0feb3d5f3ac5c5c9b4}\label{ari_pi__2_d_c__esp__08_8ino_a8b68fd0f29306f0feb3d5f3ac5c5c9b4}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1@{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1}}
\index{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1@{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1}{MTR\_B\_SX\_P1}}
{\footnotesize\ttfamily const int M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P1 = 9}

output pin 1 for left motor \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a77c90f26573c080620f9baca24364ebe}\label{ari_pi__2_d_c__esp__08_8ino_a77c90f26573c080620f9baca24364ebe}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2@{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2}}
\index{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2@{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2}{MTR\_B\_SX\_P2}}
{\footnotesize\ttfamily const int M\+T\+R\+\_\+\+B\+\_\+\+S\+X\+\_\+\+P2 = 10}

output pin 2 for left motor \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ac36ade784c05554d24241a2fa860bbaa}\label{ari_pi__2_d_c__esp__08_8ino_ac36ade784c05554d24241a2fa860bbaa}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro@{odometro}}
\index{odometro@{odometro}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro}{odometro}}
{\footnotesize\ttfamily float odometro = 0}



distanza percorsa in mm 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a4e6edab3c135f74217f544821dbb3a49}\label{ari_pi__2_d_c__esp__08_8ino_a4e6edab3c135f74217f544821dbb3a49}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro\+Cnt@{odometro\+Cnt}}
\index{odometro\+Cnt@{odometro\+Cnt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro\+Cnt}{odometroCnt}}
{\footnotesize\ttfamily long odometro\+Cnt}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a0ac82b55ed4fe13596eeffa61bb06685}\label{ari_pi__2_d_c__esp__08_8ino_a0ac82b55ed4fe13596eeffa61bb06685}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro\+Dx\+Cnt@{odometro\+Dx\+Cnt}}
\index{odometro\+Dx\+Cnt@{odometro\+Dx\+Cnt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro\+Dx\+Cnt}{odometroDxCnt}}
{\footnotesize\ttfamily long odometro\+Dx\+Cnt}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab4ce4d95d7983a12a924f49196f9b9a5}\label{ari_pi__2_d_c__esp__08_8ino_ab4ce4d95d7983a12a924f49196f9b9a5}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!odometro\+Sx\+Cnt@{odometro\+Sx\+Cnt}}
\index{odometro\+Sx\+Cnt@{odometro\+Sx\+Cnt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{odometro\+Sx\+Cnt}{odometroSxCnt}}
{\footnotesize\ttfamily long odometro\+Sx\+Cnt}



contatori encoder 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a0f792197854bfeff54c46ebf012b2187}\label{ari_pi__2_d_c__esp__08_8ino_a0f792197854bfeff54c46ebf012b2187}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!okcomm@{okcomm}}
\index{okcomm@{okcomm}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{okcomm}{okcomm}}
{\footnotesize\ttfamily int okcomm = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab9355e95cf7b931e4ac76a90c7b163c6}\label{ari_pi__2_d_c__esp__08_8ino_ab9355e95cf7b931e4ac76a90c7b163c6}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!ox@{ox}}
\index{ox@{ox}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{ox}{ox}}
{\footnotesize\ttfamily float ox = 21.\+0}



offset lungo l\textquotesingle{}asse x. viene ricavato a seguito della calibrazione 

coefficienti calibrazione bussola \mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a751717b9e3018eb4938a31fba5e636af}\label{ari_pi__2_d_c__esp__08_8ino_a751717b9e3018eb4938a31fba5e636af}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!oy@{oy}}
\index{oy@{oy}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{oy}{oy}}
{\footnotesize\ttfamily float oy = 3.\+64}



offset lungo l\textquotesingle{}asse y. viene ricavato a seguito della calibrazione 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a41052b199a87567ee2438e605f1f949d}\label{ari_pi__2_d_c__esp__08_8ino_a41052b199a87567ee2438e605f1f949d}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!pan\+Angle@{pan\+Angle}}
\index{pan\+Angle@{pan\+Angle}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{pan\+Angle}{panAngle}}
{\footnotesize\ttfamily int pan\+Angle = 90}



angolo destinazione del servo Pan 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a4b20c17190582b367bfba9b9bd5ea962}\label{ari_pi__2_d_c__esp__08_8ino_a4b20c17190582b367bfba9b9bd5ea962}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!port@{port}}
\index{port@{port}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{port}{port}}
{\footnotesize\ttfamily char port = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a6bd7fe73202cbe57f50f29e17bf7f1d2}\label{ari_pi__2_d_c__esp__08_8ino_a6bd7fe73202cbe57f50f29e17bf7f1d2}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!raggior\+Sterzo@{raggior\+Sterzo}}
\index{raggior\+Sterzo@{raggior\+Sterzo}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{raggior\+Sterzo}{raggiorSterzo}}
{\footnotesize\ttfamily float raggior\+Sterzo = 0.\+0}



raggior\+Sterzo indica lo scorrimento che applichiamo alle ruote. vedi function differenziale 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aaf3c8c8d2e46ac81d19dda9e4213d6a1}\label{ari_pi__2_d_c__esp__08_8ino_aaf3c8c8d2e46ac81d19dda9e4213d6a1}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!servo\+Pan@{servo\+Pan}}
\index{servo\+Pan@{servo\+Pan}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{servo\+Pan}{servoPan}}
{\footnotesize\ttfamily Servo servo\+Pan}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a1a47b66f30649678ffd87493fe397afd}\label{ari_pi__2_d_c__esp__08_8ino_a1a47b66f30649678ffd87493fe397afd}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!servo\+Tilt@{servo\+Tilt}}
\index{servo\+Tilt@{servo\+Tilt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{servo\+Tilt}{servoTilt}}
{\footnotesize\ttfamily Servo servo\+Tilt}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ad2b58fa9c2d105a6d47c2c3b778557c1}\label{ari_pi__2_d_c__esp__08_8ino_ad2b58fa9c2d105a6d47c2c3b778557c1}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!S\+M\+\_\+\+R5@{S\+M\+\_\+\+R5}}
\index{S\+M\+\_\+\+R5@{S\+M\+\_\+\+R5}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{S\+M\+\_\+\+R5}{SM\_R5}}
{\footnotesize\ttfamily char S\+M\+\_\+\+R5 = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_adb09a635e5dce1cb72809b635590795f}\label{ari_pi__2_d_c__esp__08_8ino_adb09a635e5dce1cb72809b635590795f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!spd\+Dx\+Cnt@{spd\+Dx\+Cnt}}
\index{spd\+Dx\+Cnt@{spd\+Dx\+Cnt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{spd\+Dx\+Cnt}{spdDxCnt}}
{\footnotesize\ttfamily long spd\+Dx\+Cnt}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ad968c532014efdd0469f8476af86bbbc}\label{ari_pi__2_d_c__esp__08_8ino_ad968c532014efdd0469f8476af86bbbc}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!spd\+Sx\+Cnt@{spd\+Sx\+Cnt}}
\index{spd\+Sx\+Cnt@{spd\+Sx\+Cnt}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{spd\+Sx\+Cnt}{spdSxCnt}}
{\footnotesize\ttfamily long spd\+Sx\+Cnt}



velocità encoder, impulsi per tempo di campionamento 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a5339db6126d080787f8511e2aae71e34}\label{ari_pi__2_d_c__esp__08_8ino_a5339db6126d080787f8511e2aae71e34}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!stato\+Run@{stato\+Run}}
\index{stato\+Run@{stato\+Run}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{stato\+Run}{statoRun}}
{\footnotesize\ttfamily int stato\+Run = 0}



macchina a stati del movimento. Definisce anche il tipo controllo guida. 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa1cebdc383b21b594c09df4f1d035286}\label{ari_pi__2_d_c__esp__08_8ino_aa1cebdc383b21b594c09df4f1d035286}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta@{teta}}
\index{teta@{teta}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta}{teta}}
{\footnotesize\ttfamily float teta = 0.\+0}



teta attuale misurato da odometria 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ab50fa34f1f6d47cde8715ac543a3b0dd}\label{ari_pi__2_d_c__esp__08_8ino_ab50fa34f1f6d47cde8715ac543a3b0dd}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+\_\+@{teta\+\_\+}}
\index{teta\+\_\+@{teta\+\_\+}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+\_\+}{teta\_}}
{\footnotesize\ttfamily float teta\+\_\+}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a87efb8e08c2adbc437cc67078d6a55fc}\label{ari_pi__2_d_c__esp__08_8ino_a87efb8e08c2adbc437cc67078d6a55fc}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+Compass@{teta\+Compass}}
\index{teta\+Compass@{teta\+Compass}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+Compass}{tetaCompass}}
{\footnotesize\ttfamily float teta\+Compass}



vettori magnetici dalla bussola 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aab8609ee95cbabd2ffeaf176b9fac768}\label{ari_pi__2_d_c__esp__08_8ino_aab8609ee95cbabd2ffeaf176b9fac768}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+Compass\+\_\+prev@{teta\+Compass\+\_\+prev}}
\index{teta\+Compass\+\_\+prev@{teta\+Compass\+\_\+prev}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+Compass\+\_\+prev}{tetaCompass\_prev}}
{\footnotesize\ttfamily float teta\+Compass\+\_\+prev}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_afae537763d72e1c7aa5bddabb567ee76}\label{ari_pi__2_d_c__esp__08_8ino_afae537763d72e1c7aa5bddabb567ee76}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+Compass\+Read@{teta\+Compass\+Read}}
\index{teta\+Compass\+Read@{teta\+Compass\+Read}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+Compass\+Read}{tetaCompassRead}}
{\footnotesize\ttfamily float teta\+Compass\+Read}



variabili bussola 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ae26b39d3cd60fb721672915cdb90d756}\label{ari_pi__2_d_c__esp__08_8ino_ae26b39d3cd60fb721672915cdb90d756}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+Misura@{teta\+Misura}}
\index{teta\+Misura@{teta\+Misura}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+Misura}{tetaMisura}}
{\footnotesize\ttfamily float teta\+Misura = 0.\+0}



teta da bussola 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a75a4104f4a9f0fc17b53a88379ed7130}\label{ari_pi__2_d_c__esp__08_8ino_a75a4104f4a9f0fc17b53a88379ed7130}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!teta\+Ref@{teta\+Ref}}
\index{teta\+Ref@{teta\+Ref}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{teta\+Ref}{tetaRef}}
{\footnotesize\ttfamily float teta\+Ref = 0.\+0}



y attuale misurato da odometria 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa556a72ca05ce9a3861b99c901bc58d6}\label{ari_pi__2_d_c__esp__08_8ino_aa556a72ca05ce9a3861b99c901bc58d6}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!tfmini@{tfmini}}
\index{tfmini@{tfmini}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{tfmini}{tfmini}}
{\footnotesize\ttfamily T\+F\+Mini tfmini}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_ad64f6da25c8c1de30ddeb9e0541fa839}\label{ari_pi__2_d_c__esp__08_8ino_ad64f6da25c8c1de30ddeb9e0541fa839}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!tilt\+Angle@{tilt\+Angle}}
\index{tilt\+Angle@{tilt\+Angle}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{tilt\+Angle}{tiltAngle}}
{\footnotesize\ttfamily int tilt\+Angle = 90}



angolo destinazione del servo Tilt 

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a458b4f86617930d87d3a7540cd482f64}\label{ari_pi__2_d_c__esp__08_8ino_a458b4f86617930d87d3a7540cd482f64}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!time\+Lidar@{time\+Lidar}}
\index{time\+Lidar@{time\+Lidar}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{time\+Lidar}{timeLidar}}
{\footnotesize\ttfamily unsigned long time\+Lidar}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa30c6b55fe4f49c1e056ee1ae129063f}\label{ari_pi__2_d_c__esp__08_8ino_aa30c6b55fe4f49c1e056ee1ae129063f}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!time\+Lidar2@{time\+Lidar2}}
\index{time\+Lidar2@{time\+Lidar2}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{time\+Lidar2}{timeLidar2}}
{\footnotesize\ttfamily unsigned long time\+Lidar2}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a20aa2804cc392e162754639d1ec564d4}\label{ari_pi__2_d_c__esp__08_8ino_a20aa2804cc392e162754639d1ec564d4}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!VA@{VA}}
\index{VA@{VA}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{VA}{VA}}
{\footnotesize\ttfamily float VA}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a57bf2119e3e83782219233e9bd8b0125}\label{ari_pi__2_d_c__esp__08_8ino_a57bf2119e3e83782219233e9bd8b0125}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!V\+A\+\_\+zero@{V\+A\+\_\+zero}}
\index{V\+A\+\_\+zero@{V\+A\+\_\+zero}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{V\+A\+\_\+zero}{VA\_zero}}
{\footnotesize\ttfamily int V\+A\+\_\+zero = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a46393dabfdc8b3c70d5811eadaedeaf4}\label{ari_pi__2_d_c__esp__08_8ino_a46393dabfdc8b3c70d5811eadaedeaf4}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!VB@{VB}}
\index{VB@{VB}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{VB}{VB}}
{\footnotesize\ttfamily float VB}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_aa57b545b28e726dc370d6afd59930221}\label{ari_pi__2_d_c__esp__08_8ino_aa57b545b28e726dc370d6afd59930221}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!V\+B\+\_\+zero@{V\+B\+\_\+zero}}
\index{V\+B\+\_\+zero@{V\+B\+\_\+zero}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{V\+B\+\_\+zero}{VB\_zero}}
{\footnotesize\ttfamily int V\+B\+\_\+zero = 0}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_a8c4da7cbc4b1a3cc91ebb8aeb7ecabbd}\label{ari_pi__2_d_c__esp__08_8ino_a8c4da7cbc4b1a3cc91ebb8aeb7ecabbd}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!xc@{xc}}
\index{xc@{xc}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{xc}{xc}}
{\footnotesize\ttfamily float xc}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_adad239fcacf5c59997872bd0c12bdfd1}\label{ari_pi__2_d_c__esp__08_8ino_adad239fcacf5c59997872bd0c12bdfd1}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!xpos@{xpos}}
\index{xpos@{xpos}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{xpos}{xpos}}
{\footnotesize\ttfamily float xpos}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_abc8f2957d7ee72cfb3e2af9bdfc27018}\label{ari_pi__2_d_c__esp__08_8ino_abc8f2957d7ee72cfb3e2af9bdfc27018}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!yc@{yc}}
\index{yc@{yc}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{yc}{yc}}
{\footnotesize\ttfamily float yc}

\mbox{\Hypertarget{ari_pi__2_d_c__esp__08_8ino_adb369a2ec52b1f831cf362b570df40d2}\label{ari_pi__2_d_c__esp__08_8ino_adb369a2ec52b1f831cf362b570df40d2}} 
\index{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}!ypos@{ypos}}
\index{ypos@{ypos}!ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino@{ari\+Pi\+\_\+2\+D\+C\+\_\+esp\+\_\+08.\+ino}}
\subsubsection{\texorpdfstring{ypos}{ypos}}
{\footnotesize\ttfamily float ypos = 0.\+0}



x attuale misurato da odometria 

